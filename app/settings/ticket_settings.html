<page-content>
    <grid-controls>
        <button type="button" class='btn btn-primary' ng-click="ticketVm.addNew()">
            <i class='fa fa-plus'></i>Add Ticket
        </button>
    </grid-controls>

    <div class="col-sm-4 no-padding-left" ng-show="ticketVm.showForm">
        <div class="box">
            <div class="box-header">
                <h3 class="box-title">Ticket</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-default btn-sm" ng-click="ticketVm.closeForm()" type="button" uib-tooltip="Close">
                        <i class="fa fa-ban icon_only"></i>
                    </button>
                </div>
            </div>
            <div class="box-body">
                <!--<div class="form-group">
                    <img class="img-responsive img-thumbnail" style="width: 150px" ng-src="{{ticketVm.newRecord.image || ticketVm.newRecord.imageLink}}" src="../../assets/images/placeholder.png" alt="">
                    <div class="fileUpload btn btn-default">
                        <span><i class="fa fa-image"></i> Upload Picture</span>
                        <input type="file" class="upload" fileread="ticketVm.newRecord.image">
                    </div>
                </div>-->
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" class="form-control" ng-model="ticketVm.newRecord.title" required />
                </div>
                <div class="form-group">
                    <label>Prefix:</label>
                    <input type="text" class="form-control" ng-model="ticketVm.newRecord.refPrefix" />
                </div>
                <div class="form-group">
                    <label>Price:</label>
                    <div class="input-group">
                        <span class="input-group-addon">GHÂ¢</span>
                        <input type="number" class="form-control" ng-model="ticketVm.newRecord.price" required />
                    </div>
                </div>
                <div class="form-group">
                    <label>Type:</label>
                    <select class="form-control" ui-select2 ng-model="ticketVm.newRecord.type" ng-options="type as type for type in ticketVm.types"></select>
                </div>
                <div class="form-group" ng-if="ticketVm.newRecord.id">
                    <label>Status:</label>
                    <select class="form-control" ui-select2 ng-model="ticketVm.newRecord.status" ng-options="status as status for status in ticketVm.statuses"></select>
                </div>
                <div class="form-group">
                    <label>Admission:</label>
                    <input type="number" class="form-control" ng-model="ticketVm.newRecord.admission" step="1" min="1" />
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea class="form-control" ng-model="ticketVm.newRecord.description" cols="5" rows="5"></textarea>
                </div>
            </div>
            <div class="box-footer">
                <button class="btn btn-success" ng-click="ticketVm.saveRecord(ticketVm.newRecord)" btn-loading="ticketVm.saving" data-loading-text="Saving"><i class='fa fa-save'></i>Save </button>
                <button class="btn btn-default" ng-click="ticketVm.closeForm()"><i class='fa fa-ban'></i>Cancel</button>
                <confirm-dialog message="Are you sure you want to delete?" title="Delete Confirmation" ng-if="ticketVm.newRecord.id && ticketVm.model.name != 'appsetting'" class="btn btn-danger pull-right" on-confirm="ticketVm.deleteRecord(ticketVm.newRecord)">
                    <i class="fa fa-trash"></i>Delete
                </confirm-dialog>
            </div>
        </div>
    </div>
    <div ng-class="ticketVm.gridSize" class="no-padding">
        <div class="panel panel-default top-default">
            <div class="table-responsive">
                <table class='table table-hover'>
                    <thead>
                        <tr>
                            <th class="num_col_1">#</th>
                            <th>Title</th>
                            <th>Type</th>
                            <th>Price (GHS)</th>
                            <th>Prefix</th>
                            <th>Status</th>
                            <th>Admission</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="record in ticketVm.records" ng-click="ticketVm.edit(record)" class="link-row" ng-class="{ active: ticketVm.newRecord.id == record.id}">
                            <td>{{$index + 1}}</td>
                            <td>{{record.title}}</td>
                            <td>{{record.type}}</td>
                            <td>{{record.price}}</td>
                            <td>{{record.refPrefix}}</td>
                            <td>{{record.status}}</td>
                            <td>{{record.admission}}</td>
                            <td>{{record.description}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</page-content>