"use strict";angular.module("highcharts-ng",[]).factory("highchartsNGUtils",function(){return{indexOf:function(n,t,i){i===undefined&&(i=0);i<0&&(i+=n.length);i<0&&(i=0);for(var r=n.length;i<r;i++)if(i in n&&n[i]===t)return i;return-1},prependMethod:function(n,t,i){var r=n[t];n[t]=function(){var n=Array.prototype.slice.call(arguments);if(i.apply(this,n),r)return r.apply(this,n)}},deepExtend:function n(t,i){var r,u;if(angular.isArray(i))for(t=angular.isArray(t)?t:[],r=0;r<i.length;r++)t[r]=n(t[r]||{},i[r]);else if(angular.isObject(i))for(u in i)t[u]=n(t[u]||{},i[u]);else t=i;return t}}}).directive("highchart",function(n){var r=0,u=function(n){var t=!1;return angular.forEach(n,function(n){angular.isDefined(n.id)||(n.id="series-"+r++,t=!0)}),t},t=["xAxis","yAxis"],f=function(i,r,u){var f={},e={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1}};return f=u.options?n.deepExtend(e,u.options):e,f.chart.renderTo=r[0],angular.forEach(t,function(t){angular.isDefined(u[t])&&(f[t]=angular.copy(u[t]),(angular.isDefined(u[t].currentMin)||angular.isDefined(u[t].currentMax))&&(n.prependMethod(f.chart.events,"selection",function(n){var r=this;n[t]?i.$apply(function(){i.config[t].currentMin=n[t][0].min;i.config[t].currentMax=n[t][0].max}):i.$apply(function(){i.config[t].currentMin=r[t][0].dataMin;i.config[t].currentMax=r[t][0].dataMax})}),n.prependMethod(f.chart.events,"addSeries",function(){i.config[t].currentMin=this[t][0].min||i.config[t].currentMin;i.config[t].currentMax=this[t][0].max||i.config[t].currentMax})))}),u.title&&(f.title=u.title),u.subtitle&&(f.subtitle=u.subtitle),u.credits&&(f.credits=u.credits),u.size&&(u.size.width&&(f.chart.width=u.size.width),u.size.height&&(f.chart.height=u.size.height)),f},e=function(n,t){var i=n.getExtremes();(t.currentMin!==i.dataMin||t.currentMax!==i.dataMax)&&n.setExtremes(t.currentMin,t.currentMax,!1)},o=function(n,t,i){(t.currentMin||t.currentMax)&&n[i][0].setExtremes(t.currentMin,t.currentMax,!0)},i=function(n){return angular.extend({},n,{data:null,visible:null})};return{restrict:"EAC",replace:!0,template:"<div><\/div>",scope:{config:"="},link:function(r,s){var c={},a=function(t){var f,s=[],l,e,o;if(t){if(l=u(t),l)return!1;if(angular.forEach(t,function(n){s.push(n.id);var t=h.get(n.id);t?angular.equals(c[n.id],i(n))?(n.visible!==undefined&&t.visible!==n.visible&&t.setVisible(n.visible,!1),t.setData(angular.copy(n.data),!1)):t.update(angular.copy(n),!1):h.addSeries(angular.copy(n),!1);c[n.id]=i(n)}),r.config.noData){for(e=!1,f=0;f<t.length;f++)if(t[f].data&&t[f].data.length>0){e=!0;break}e?h.hideLoading():h.showLoading(r.config.noData)}}for(f=h.series.length-1;f>=0;f--)o=h.series[f],n.indexOf(s,o.options.id)<0&&o.remove(!1);return!0},h=!1,l=function(){var i;h&&h.destroy();c={};var n=r.config||{},u=f(r,s,n),e=n.func||undefined;for(h=n.useHighStocks?new Highcharts.StockChart(u,e):new Highcharts.Chart(u,e),i=0;i<t.length;i++)n[t[i]]&&o(h,n[t[i]],t[i]);n.loading&&h.showLoading()};l();r.$watch("config.series",function(n){var t=a(n);t&&h.redraw()},!0);r.$watch("config.title",function(n){h.setTitle(n,!0)},!0);r.$watch("config.subtitle",function(n){h.setTitle(!0,n)},!0);r.$watch("config.loading",function(n){n?h.showLoading():h.hideLoading()});r.$watch("config.credits.enabled",function(n){n?h.credits.show():h.credits&&h.credits.hide()});r.$watch("config.useHighStocks",function(n,t){n!==t&&l()});angular.forEach(t,function(n){r.$watch("config."+n,function(t,i){t!==i&&t&&(h[n][0].update(t,!1),e(h[n][0],angular.copy(t)),h.redraw())},!0)});r.$watch("config.options",function(n,t,i){n!==t&&(l(),a(i.config.series),h.redraw())},!0);r.$watch("config.size",function(n,t){n!==t&&n&&h.setSize(n.width||undefined,n.height||undefined)},!0);r.$on("highchartsng.reflow",function(){h.reflow()});r.$on("$destroy",function(){h&&h.destroy();s.remove()})}}});
//# sourceMappingURL=highcharts-ng.min.js.map
